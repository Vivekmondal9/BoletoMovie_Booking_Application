{"ast":null,"code":"var _jsxFileName = \"/Users/vivekmondal/Desktop/Final_Exam_Coding_Invaders/boletomovie/src/BookingPage/userbookings.jsx\",\n  _s = $RefreshSig$();\nimport { useParams } from \"react-router\";\nimport Footer from \"../Navbar/Footer\";\nimport Navbar from \"../Navbar/navbar\";\nimport { useEffect, useState } from \"react\";\nimport { fetchWithToken } from \"../API/interceptor\";\nimport Loading from \"../Home/Loading\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction UserBookings() {\n  _s();\n  const [userBookings, setUserBookings] = useState([]);\n  const [movies, setMovies] = useState([]);\n  const [theaters, setTheaters] = useState([]);\n  useEffect(() => {\n    let access_token = localStorage.getItem('access_token');\n    async function fetchUserBookings() {\n      try {\n        const response = await fetchWithToken(\"http://127.0.0.1:8000/api/user/bookings/\", {\n          headers: {\n            'Authorization': `Bearer ${access_token}`\n          }\n        });\n        if (response.ok) {\n          const data = await response.json();\n          setUserBookings(data);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    async function fetchAllMovies() {\n      try {\n        const response = await fetchWithToken(\"http://127.0.0.1:8000/api/movies/\");\n        if (response.ok) {\n          const data = await response.json();\n          // console.log(\"Fetched movies data:\", data);\n          setMovies(data.movies);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    async function fetchAllTheaters() {\n      try {\n        const response = await fetchWithToken(\"http://127.0.0.1:8000/api/theaters/\");\n        if (response.ok) {\n          const data = await response.json();\n          console.log(\"Fetched movies data:\", data);\n          setTheaters(data);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    fetchUserBookings();\n    fetchAllMovies();\n    fetchAllTheaters();\n  }, []);\n  const getMovieName = movieId => {\n    const foundMovie = movies.find(movie => movie.movie_id === movieId);\n    return foundMovie ? foundMovie.title : \"Unknown Movie\";\n  };\n  const getTheaterName = theaterId => {\n    const foundTheater = theaters.find(theater => theater.theater_id === theaterId);\n    return foundTheater ? foundTheater.name : \"Unknown Theater\";\n  };\n  const getTheaterTiming = theaterId => {\n    const foundTheater = theaters.find(theater => theater.theater_id === theaterId);\n    return foundTheater ? foundTheater.timing : \"Unknown Theater\";\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      style: {\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        color: \"white\",\n        textShadow: \"2px 2px 3px black\",\n        gap: \"20px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"My Bookings\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this), userBookings && userBookings.map(booking => {\n        const movieName = getMovieName(booking.movie);\n        const theaterName = getTheaterName(booking.theater);\n        if (movieName !== \"Unknown Movie\" && theaterName !== \"Unknown Theater\") {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              boxShadow: \"2px 2px 5px black\",\n              width: \"auto\",\n              height: \"auto\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              padding: \"2em\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"h2\", {\n              children: [\"Movie: \", movieName, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 56\n              }, this), \"Theater: \", theaterName, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 60\n              }, this), \"Timing: \", getTheaterTiming(booking.theater), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 81\n              }, this), \"Seats: \", booking.seat_numbers.join(\",\")]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 33\n            }, this)\n          }, booking.booking_id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 29\n          }, this);\n        }\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading\",\n          children: /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 53\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 28\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n_s(UserBookings, \"DNwZs1Z5SNKjsioIjbKxStSaS5A=\");\n_c = UserBookings;\nexport default UserBookings;\nvar _c;\n$RefreshReg$(_c, \"UserBookings\");","map":{"version":3,"names":["useParams","Footer","Navbar","useEffect","useState","fetchWithToken","Loading","jsxDEV","_jsxDEV","Fragment","_Fragment","UserBookings","_s","userBookings","setUserBookings","movies","setMovies","theaters","setTheaters","access_token","localStorage","getItem","fetchUserBookings","response","headers","ok","data","json","error","console","log","fetchAllMovies","fetchAllTheaters","getMovieName","movieId","foundMovie","find","movie","movie_id","title","getTheaterName","theaterId","foundTheater","theater","theater_id","name","getTheaterTiming","timing","children","fileName","_jsxFileName","lineNumber","columnNumber","className","style","justifyContent","alignItems","color","textShadow","gap","map","booking","movieName","theaterName","display","boxShadow","width","height","padding","seat_numbers","join","booking_id","_c","$RefreshReg$"],"sources":["/Users/vivekmondal/Desktop/Final_Exam_Coding_Invaders/boletomovie/src/BookingPage/userbookings.jsx"],"sourcesContent":["import { useParams } from \"react-router\";\nimport Footer from \"../Navbar/Footer\";\nimport Navbar from \"../Navbar/navbar\";\nimport { useEffect, useState } from \"react\";\nimport { fetchWithToken } from \"../API/interceptor\";\nimport Loading from \"../Home/Loading\";\n\n\n\n\n\nfunction UserBookings() {\n\n\n\n\n\n    const [userBookings, setUserBookings] = useState([]);\n    const [movies, setMovies] = useState([])\n    const [theaters, setTheaters] = useState([])\n\n    useEffect(() => {\n\n        let access_token = localStorage.getItem('access_token')\n        async function fetchUserBookings() {\n            try {\n                const response = await fetchWithToken(\"http://127.0.0.1:8000/api/user/bookings/\",\n                    {\n                        headers: {\n                            'Authorization': `Bearer ${access_token}`\n                        }\n                    }\n\n                );\n                if (response.ok) {\n                    const data = await response.json();\n                    setUserBookings(data);\n                }\n            } catch (error) {\n                console.log(error);\n            }\n        }\n\n        async function fetchAllMovies() {\n            try {\n                const response = await fetchWithToken(\"http://127.0.0.1:8000/api/movies/\");\n                if (response.ok) {\n                    const data = await response.json();\n                    // console.log(\"Fetched movies data:\", data);\n                    setMovies(data.movies);\n                }\n            } catch (error) {\n                console.log(error);\n            }\n        }\n        async function fetchAllTheaters() {\n            try {\n                const response = await fetchWithToken(\"http://127.0.0.1:8000/api/theaters/\");\n                if (response.ok) {\n                    const data = await response.json();\n                    console.log(\"Fetched movies data:\", data);\n                    setTheaters(data);\n                }\n            } catch (error) {\n                console.log(error);\n            }\n        }\n\n        fetchUserBookings();\n        fetchAllMovies();\n        fetchAllTheaters();\n    }, []);\n\n\n\n\n    const getMovieName = (movieId) => {\n        const foundMovie = movies.find((movie) => movie.movie_id === movieId);\n        return foundMovie ? foundMovie.title : \"Unknown Movie\";\n    };\n    const getTheaterName = (theaterId) => {\n        const foundTheater = theaters.find((theater) => theater.theater_id === theaterId);\n        return foundTheater ? foundTheater.name : \"Unknown Theater\";\n    };\n\n    const getTheaterTiming = (theaterId) => {\n        const foundTheater = theaters.find((theater) => theater.theater_id === theaterId);\n        return foundTheater ? foundTheater.timing : \"Unknown Theater\";\n    };\n\n\n\n\n    return (\n        <>\n            <Navbar></Navbar>\n            <div className=\"container\" style={{ justifyContent: \"center\", alignItems: \"center\", color: \"white\", textShadow: \"2px 2px 3px black\", gap: \"20px\" }}>\n\n                <h2>My Bookings</h2>\n                <hr />\n                {userBookings && userBookings.map((booking) => {\n                    const movieName = getMovieName(booking.movie);\n                    const theaterName = getTheaterName(booking.theater);\n\n                    if (movieName !== \"Unknown Movie\" && theaterName !== \"Unknown Theater\") {\n                        return (\n                            <div style={{ display: \"flex\", boxShadow: \"2px 2px 5px black\", width: \"auto\", height: \"auto\", alignItems: \"center\", justifyContent: \"center\", padding: \"2em\" }} key={booking.booking_id}>\n                                <h2>\n                                    Movie: {movieName} <br />\n                                    Theater: {theaterName} <br />\n                                    Timing: {getTheaterTiming(booking.theater)} <br />\n                                    Seats: {booking.seat_numbers.join(\",\")}\n                                </h2>\n                            </div>\n                        );\n                    }\n                    return(<div className=\"loading\"><Loading></Loading></div>)\n                })}\n\n                {/* {userBookings.length==0 ? \n                return()} */}\n\n\n            </div>\n            <Footer></Footer>\n        </>\n    )\n}\n\n\nexport default UserBookings;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}