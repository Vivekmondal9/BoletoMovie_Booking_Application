{"ast":null,"code":"import _regeneratorRuntime from\"/Users/vivekmondal/Documents/VivekMondal_Documents/CI_Final_Exam/Final_Exam_Coding_Invaders/boletomovie/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/vivekmondal/Documents/VivekMondal_Documents/CI_Final_Exam/Final_Exam_Coding_Invaders/boletomovie/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/vivekmondal/Documents/VivekMondal_Documents/CI_Final_Exam/Final_Exam_Coding_Invaders/boletomovie/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import Navbar from\"../Navbar/navbar\";import*as Yup from\"yup\";import axios from'axios';// import { Link } from \"react-router-dom\";\nimport{Formik,Field,Form,ErrorMessage,useFormik}from\"formik\";import{useNavigate}from\"react-router\";import\"../Register/login.css\";import{Link}from\"react-router-dom\";import Footer from\"../Navbar/Footer\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Login(){var navigate=useNavigate();var initialvalues={username:\"\",password:\"\"};var validationschema=Yup.object({username:Yup.string().required(\"Username is Required!!\"),password:Yup.string().required(\"Password is Required!!\")});var _useState=useState({responseText:\"\",responseClass:\"\"}),_useState2=_slicedToArray(_useState,2),responseData=_useState2[0],setResponseData=_useState2[1];function onSubmit(_x,_x2){return _onSubmit.apply(this,arguments);}function _onSubmit(){_onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(values,_ref){var resetForm;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:resetForm=_ref.resetForm;_context.next=3;return axios.post(\"http://127.0.0.1:8000/api/users/login/\",values).then(function(response){localStorage.setItem(\"access_token\",response.data.access_token);localStorage.setItem(\"refresh_token\",response.data.refresh_token);setResponseData({responseText:\"Login Successfull\",responseClass:\"alert alert-success\"});setTimeout(function(){navigate(\"/\",true);},1000);},function(error){setResponseData({responseText:\"Invalid username or password \",responseClass:\"alert alert-danger\"});}).catch(function(error){console.log(error);});case 3:resetForm();// setTimeout(()=>{\n//     window.location.reload();\n// },2000)\ncase 4:case\"end\":return _context.stop();}},_callee);}));return _onSubmit.apply(this,arguments);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"container maincontainer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mainform\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"logg\",children:\"Login\"}),/*#__PURE__*/_jsx(\"div\",{className:responseData.responseClass,role:\"alert\",children:responseData.responseText}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Formik,{initialValues:initialvalues,onSubmit:onSubmit,validateOnMount:true,validationSchema:validationschema,children:function children(formik){return/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username\"}),/*#__PURE__*/_jsx(Field,{type:\"text\",name:\"username\",className:\"form-control\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"username\",children:function children(errormessage){return/*#__PURE__*/_jsx(\"small\",{className:\"text-danger\",children:errormessage});}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(Field,{type:\"password\",name:\"password\",className:\"form-control\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"password\",children:function children(errormessage){return/*#__PURE__*/_jsx(\"small\",{className:\"text-danger\",children:errormessage});}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",class:\"btn btn-primary\",value:\"login\",disabled:!formik.isValid,children:\"Submit\"})]});}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center\",children:[\"New user? \",/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Click here\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center\",children:[\"Forget Password? \",/*#__PURE__*/_jsx(Link,{to:\"/forgetpassword\",children:\"Click here\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\"})]})}),/*#__PURE__*/_jsx(Footer,{})]});}export default Login;","map":{"version":3,"names":["useState","Navbar","Yup","axios","Formik","Field","Form","ErrorMessage","useFormik","useNavigate","Link","Footer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","navigate","initialvalues","username","password","validationschema","object","string","required","_useState","responseText","responseClass","_useState2","_slicedToArray","responseData","setResponseData","onSubmit","_x","_x2","_onSubmit","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","values","_ref","resetForm","wrap","_callee$","_context","prev","next","post","then","response","localStorage","setItem","data","access_token","refresh_token","setTimeout","error","catch","console","log","stop","children","className","role","initialValues","validateOnMount","validationSchema","formik","htmlFor","type","name","errormessage","class","value","disabled","isValid","to"],"sources":["/Users/vivekmondal/Documents/VivekMondal_Documents/CI_Final_Exam/Final_Exam_Coding_Invaders/boletomovie/src/Register/login.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport Navbar from \"../Navbar/navbar\";\nimport * as Yup from \"yup\";\nimport axios from 'axios';\n// import { Link } from \"react-router-dom\";\nimport { Formik, Field, Form, ErrorMessage, useFormik } from \"formik\";\nimport { useNavigate } from \"react-router\";\nimport \"../Register/login.css\";\nimport { Link } from \"react-router-dom\";\nimport Footer from \"../Navbar/Footer\";\nfunction Login() {\n    const navigate = useNavigate();\n\n    const initialvalues = {\n        username: \"\",\n        password: \"\"\n    }\n\n    const validationschema = Yup.object({\n        username: Yup.string().required(\"Username is Required!!\"),\n        password: Yup.string().required(\"Password is Required!!\")\n    })\n\n\n    const [responseData, setResponseData] = useState({\n        responseText: \"\",\n        responseClass: \"\"\n    })\n\n    async function onSubmit(values, { resetForm }) {\n        await axios.post(\"http://127.0.0.1:8000/api/users/login/\", values)\n            .then((response) => {\n                localStorage.setItem(\"access_token\", response.data.access_token)\n                localStorage.setItem(\"refresh_token\", response.data.refresh_token)\n\n                setResponseData({\n                    responseText: \"Login Successfull\",\n                    responseClass: \"alert alert-success\"\n                });\n                setTimeout(() => {\n                    navigate(\"/\", true)\n                }, 1000)\n            },\n                (error) => {\n                    setResponseData({\n                        responseText: \"Invalid username or password \",\n                        responseClass: \"alert alert-danger\"\n                    })\n                }\n            )\n            .catch((error) => {\n                console.log(error);\n\n            })\n        resetForm();\n\n        // setTimeout(()=>{\n        //     window.location.reload();\n\n        // },2000)\n      \n\n\n    }\n\n\n\n\n\n    return (\n        <>\n            <Navbar></Navbar>\n\n            <div className=\"container maincontainer\">\n                <div className=\"row\">\n                    <div className=\"col-md-3\"></div>\n                    <div className=\"col-md-6\">\n                        <div className=\"mainform\">\n                            <h1 className=\"logg\">Login</h1>\n                            <div className={responseData.responseClass} role=\"alert\">{responseData.responseText}</div>\n                            <br></br>\n                            <Formik initialValues={initialvalues} onSubmit={onSubmit} validateOnMount validationSchema={validationschema}>\n                                {(formik)=>{\n                                    return(\n                                        <Form>\n                                            <div className=\"form-group\">\n                                                <label htmlFor=\"username\">Username</label>\n                                                <Field type=\"text\" name=\"username\" className=\"form-control\"/>\n                                                <ErrorMessage name=\"username\">{(errormessage)=>(<small className=\"text-danger\">{errormessage}</small>)}</ErrorMessage>\n                                            </div>\n\n                                            <div className=\"form-group\">\n                                                <label htmlFor=\"password\">Password</label>\n                                                <Field type=\"password\" name=\"password\" className=\"form-control\"/>\n                                                <ErrorMessage name=\"password\">{(errormessage)=>(<small className=\"text-danger\">{errormessage}</small>)}</ErrorMessage>\n                                            </div>\n                                            <button type=\"submit\" class=\"btn btn-primary\" value=\"login\" disabled={!formik.isValid}>Submit</button>\n                                        </Form>\n                                    )\n                                }}\n                            </Formik>\n                            <br />\n                            <p className=\"text-center\">\n                                New user? <Link to=\"/signup\">Click here</Link>\n                            </p>\n                            <p className=\"text-center\">\n                                Forget Password? <Link to=\"/forgetpassword\">Click here</Link>\n                            </p>\n\n                        </div>\n                    </div>\n                    <div className=\"col-md-3\"></div>\n                </div>\n            </div>\n            <Footer></Footer>\n\n        </>\n    )\n\n}\n\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}