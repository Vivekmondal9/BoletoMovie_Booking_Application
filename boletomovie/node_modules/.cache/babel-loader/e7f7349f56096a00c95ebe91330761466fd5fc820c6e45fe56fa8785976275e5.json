{"ast":null,"code":"import _regeneratorRuntime from\"/Users/vivekmondal/Documents/VivekMondal_Documents/CI_Final_Exam/Final_Exam_Coding_Invaders/boletomovie/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/vivekmondal/Documents/VivekMondal_Documents/CI_Final_Exam/Final_Exam_Coding_Invaders/boletomovie/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/vivekmondal/Documents/VivekMondal_Documents/CI_Final_Exam/Final_Exam_Coding_Invaders/boletomovie/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useParams}from\"react-router\";import Navbar from\"../Navbar/navbar\";import{useEffect,useState}from\"react\";import axios from\"axios\";import Loading from\"../Home/Loading\";import\"../Moviepage/moviepage.css\";import Footer from\"../Navbar/Footer\";import{fetchWithToken}from\"../API/interceptor\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function SingleMovie(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),movies=_useState2[0],setMovies=_useState2[1];var params=useParams();var id=params.id;useEffect(function(){function fetchMovie(){return _fetchMovie.apply(this,arguments);}function _fetchMovie(){_fetchMovie=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetchWithToken(\"http://127.0.0.1:8000/api/movies/single/?id=\"+id);case 3:response=_context.sent;if(!response.ok){_context.next=9;break;}_context.next=7;return response.json();case 7:result=_context.sent;setMovies(result);case 9:_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 14:case\"end\":return _context.stop();}},_callee,null,[[0,11]]);}));return _fetchMovie.apply(this,arguments);}fetchMovie();},[]);var movie;if(movies){movie=movies[\"movies\"];}var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),theaters=_useState4[0],setTheaters=_useState4[1];useEffect(function(){function fetchTheater(){return _fetchTheater.apply(this,arguments);}function _fetchTheater(){_fetchTheater=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response,result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetchWithToken(\"http://127.0.0.1:8000/api/movies/theaters/?movie=\"+id+\"&page=1\");case 3:response=_context2.sent;if(!response.ok){_context2.next=9;break;}_context2.next=7;return response.json();case 7:result=_context2.sent;setTheaters(result);case 9:_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 14:case\"end\":return _context2.stop();}},_callee2,null,[[0,11]]);}));return _fetchTheater.apply(this,arguments);}fetchTheater();// axios.get(\"http://127.0.0.1:8000/api/movies/theaters/?movie=\" + id + \"&page=1\")\n//     .then((response) => {\n//         setTheaters(response.data)\n//     })\n},[]);// console.log(theaters)\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"thtrdiv\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",style:{margin:\"1em\",display:\"flex\",justifyContent:\"center\"},children:movie&&movie.map(function(i,p){return/*#__PURE__*/_jsxs(\"div\",{class:\"card\",style:{\"width\":\"18rem\",\"backgroundColor\":\"transparent\"},children:[/*#__PURE__*/_jsx(\"img\",{src:i.image,class:\"card-img-top\",alt:\"...\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"product-title\",id:i.movie_id,children:i.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",id:i.movie_id,children:[\"Director: \",i.director]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",id:i.movie_id,children:[\"Language: \",i.language]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text genre\",id:i.movie_id,children:[\"Genre: \",i.genre]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text genre\",id:i.movie_id,children:[\"Duration: \",i.duration,\" Mins\"]})]})]});})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",style:{margin:\"1em\",display:\"flex\",flexDirection:\"column\"},children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:\"white\",textShadow:\"2px 2px 3px black\"},children:\"Theater List\"}),/*#__PURE__*/_jsx(\"hr\",{style:{color:\"white\"}}),theaters&&theaters[\"theaters\"].map(function(i,p){return/*#__PURE__*/_jsxs(\"div\",{class:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"product-title\",id:i.theater_id,children:i.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",id:i.theater_id,children:[\"Address: \",i.address]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",id:i.theater_id,children:[\"Pincode: \",i.pincode]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text genre\",id:i.theater_id,children:[\"Timings: \",i.timing]}),/*#__PURE__*/_jsx(\"a\",{href:\"/movie/\"+id+\"/theater/\"+i.theater_id,class:\"btn btn-primary\",id:i.theater_id,children:\"Book Now\"}),/*#__PURE__*/_jsx(\"hr\",{})]});}),!theaters&&/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:/*#__PURE__*/_jsx(Loading,{})})]})]}),/*#__PURE__*/_jsx(\"hr\",{style:{color:\"white\"}}),/*#__PURE__*/_jsx(Footer,{})]});}export default SingleMovie;","map":{"version":3,"names":["useParams","Navbar","useEffect","useState","axios","Loading","Footer","fetchWithToken","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SingleMovie","_useState","_useState2","_slicedToArray","movies","setMovies","params","id","fetchMovie","_fetchMovie","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","result","wrap","_callee$","_context","prev","next","sent","ok","json","t0","console","log","stop","movie","_useState3","_useState4","theaters","setTheaters","fetchTheater","_fetchTheater","_callee2","_callee2$","_context2","children","className","style","margin","display","justifyContent","map","i","p","class","src","image","alt","movie_id","title","director","language","genre","duration","flexDirection","color","textShadow","theater_id","name","address","pincode","timing","href"],"sources":["/Users/vivekmondal/Documents/VivekMondal_Documents/CI_Final_Exam/Final_Exam_Coding_Invaders/boletomovie/src/Moviepage/SingleMovie.jsx"],"sourcesContent":["import { useParams } from \"react-router\";\nimport Navbar from \"../Navbar/navbar\";\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport Loading from \"../Home/Loading\";\nimport \"../Moviepage/moviepage.css\"\nimport Footer from \"../Navbar/Footer\";\nimport { fetchWithToken } from \"../API/interceptor\";\n\n\n\nfunction SingleMovie() {\n\n    const [movies, setMovies] = useState()\n    let params = useParams()\n    let id = params.id\n\n    useEffect(() => {\n\n        async function fetchMovie() {\n            try {\n                const response = await fetchWithToken(\"http://127.0.0.1:8000/api/movies/single/?id=\" + id);\n                if (response.ok){\n                    const result= await response.json()\n                    setMovies(result)\n                }\n            }\n            catch(error){\n                console.log(error)\n            }\n\n        }\n        fetchMovie()\n    }, [])\n    let movie\n    if (movies) {\n        movie = movies[\"movies\"]\n    }\n    const [theaters, setTheaters] = useState()\n\n    useEffect(() => {\n\n        async function fetchTheater(){\n            try{\n                const response=await fetchWithToken(\"http://127.0.0.1:8000/api/movies/theaters/?movie=\" + id + \"&page=1\");\n                if (response.ok){\n                    const result=await response.json()\n                    setTheaters(result)\n                }\n            }\n            catch(error){\n                console.log(error)\n            }\n        }\n        fetchTheater()\n\n        // axios.get(\"http://127.0.0.1:8000/api/movies/theaters/?movie=\" + id + \"&page=1\")\n        //     .then((response) => {\n        //         setTheaters(response.data)\n        //     })\n\n    }, [])\n    // console.log(theaters)\n\n\n\n    return (\n        <>\n            <Navbar></Navbar>\n            <div className=\"thtrdiv\">\n                <div className=\"col-md-3\" style={{ margin: \"1em\", display: \"flex\" ,justifyContent:\"center\"}}>\n                    {movie &&\n                        movie.map((i, p) => (\n                            <div class=\"card\" style={{ \"width\": \"18rem\", \"backgroundColor\": \"transparent\" }}>\n                                <img src={i.image} class=\"card-img-top\" alt=\"...\" />\n                                <div class=\"card-body\">\n                                    <h5 className=\"product-title\" id={i.movie_id} >{i.title}</h5>\n                                    <p className=\"card-text\" id={i.movie_id}>Director: {i.director}</p>\n                                    <p className=\"card-text\" id={i.movie_id}>Language: {i.language}</p>\n                                    <p className=\"card-text genre\" id={i.movie_id}>Genre: {i.genre}</p>\n                                    <p className=\"card-text genre\" id={i.movie_id}>Duration: {i.duration} Mins</p>\n                                    {/* <a href=\"#\" class=\"btn btn-primary\">Go somewhere</a> */}\n                                </div>\n\n                            </div>\n                        ))\n\n                    }\n                </div>\n\n                <div className=\"col-md-6\" style={{ margin: \"1em\", display: \"flex\", flexDirection: \"column\" }}>\n                    <h2 style={{ color: \"white\", textShadow: \"2px 2px 3px black\" }}>Theater List</h2>\n                    <hr style={{ color: \"white\" }} />\n                    {theaters &&\n                        theaters[\"theaters\"].map((i, p) => (\n                            <div class=\"card-body\">\n                                <h5 className=\"product-title\" id={i.theater_id} >{i.name}</h5>\n                                <p className=\"card-text\" id={i.theater_id}>Address: {i.address}</p>\n                                <p className=\"card-text\" id={i.theater_id}>Pincode: {i.pincode}</p>\n                                <p className=\"card-text genre\" id={i.theater_id}>Timings: {i.timing}</p>\n\n                                <a href={\"/movie/\"+id+\"/theater/\"+i.theater_id} class=\"btn btn-primary\" id={i.theater_id}>Book Now</a>\n                                <hr />\n                            </div>\n\n\n                        ))}\n                    {!theaters &&\n\n                        (<div className=\"loading\"><Loading></Loading></div>)\n\n                    }\n                </div>\n            </div>\n            <hr style={{ color: \"white\" }} />\n            <Footer></Footer>\n        </>\n    )\n\n}\n\n\nexport default SingleMovie;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}